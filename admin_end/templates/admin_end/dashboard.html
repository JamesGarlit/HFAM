{% extends "admin_end/base.html" %}
{% load static %}
{% block content %}
<!-- Page header -->
<div class="page-header d-print-none">
  <div class="container-xl">
    <div class="row g-2 align-items-center">
      <div class="col">
        <!-- Page pre-title -->
        <div class="page-pretitle">
          Overview
        </div>
        <h2 class="page-title">
          Dashboard
        </h2>
      </div>
    </div>
  </div>
</div>
<!-- Page body -->
<div class="page-body">
  <div class="container-xl">
    <div class="row row-cards">
      <div class="col-lg-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <div id="chart-demo-pie"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <div id="absenteeismChart"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <div id="chart-completion-tasks-2"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <div id="chart-completion-tasks-3"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <div id="chart-completion-tasks-4"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <div id="chart-completion-tasks-5"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% block css %}
<!-- Include external CSS stylesheets -->

<!-- Additional CSS for the specific page -->
<style>

</style>
{% endblock %}

{% block javascript %}
<script>
  var absenteeismData = [
            {% for entry in absent_dates %}
                { date: "{{ entry.date }}", count: {{ entry.count }} },
            {% endfor %}
        ];

        // Process data for Highcharts
        var chartData = processDataForHighcharts(absenteeismData);

        // Create Highcharts chart
        Highcharts.chart('absenteeismChart', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Absenteeism Analysis'
            },
            xAxis: {
                categories: chartData.dates,
                title: {
                    text: 'Date'
                }
            },
            yAxis: {
                title: {
                    text: 'Absentee Count'
                }
            },
            series: [{
                name: 'Absentee Count',
                data: chartData.absenteeCounts
            }]
        });

        // Function to process data for Highcharts
        function processDataForHighcharts(data) {
            // Implement your data processing logic here
            // This could involve transforming the data or counting absentees for each date
            // Return an object with dates and corresponding absentee counts
            // Example: { dates: ['2024-01-01', '2024-01-02'], absenteeCounts: [10, 15] }
        }
  
  $(document).ready(function () {
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == 'success' %}
                toastr.success('{{ message }}');
            {% elif message.tags == 'error' %}
                toastr.error('{{ message }}');
            {% else %}
                toastr('{{ message }}');
            {% endif %}
        {% endfor %}
    {% endif %}
});
</script>
{% endblock %}
{% endblock %}